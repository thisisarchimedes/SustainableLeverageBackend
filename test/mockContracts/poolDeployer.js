const ethers = require('ethers');
require('dotenv').config()

// Define the ABI of the contract
const contractAbi = [
    "function balances(uint8) public view returns (uint256)",
    "function updateBalances(uint256, uint256) public"
];

// Define the bytecode of the contract
const contractBytecode = "0x60806040523480156100115760006000fd5b50610017565b6101e6806100266000396000f3fe60806040523480156100115760006000fd5b506004361061003b5760003560e01c8063da19eae014610041578063f0020db6146100875761003b565b60006000fd5b610071600480360360208110156100585760006000fd5b81019080803560ff1690602001909291905050506100c0565b6040518082815260200191505060405180910390f35b6100be6004803603604081101561009e5760006000fd5b810190808035906020019092919080359060200190929190505050610169565b005b600060028260ff16101515610140576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f496e76616c696420746f6b656e20696e6465780000000000000000000000000081526020015060200191505060405180910390fd5b60006000508260ff1660028110151561015557fe5b90900160005b50549050610164565b919050565b816000600050600060028110151561017d57fe5b90900160005b50819090905550806000600050600160028110151561019e57fe5b90900160005b508190909055505b505056fea26469706673582212202be5b1ac3c30e8e8c23ef0d2dff18a56996e7e27d0ea5c7098ee6b7c0a88a63564736f6c63430007030033";

async function main() {
    console.log('url',process.env.RPC_URL)
    // Connect to the network
    const provider = new ethers.JsonRpcProvider(process.env.RPC_URL);

    // Create a wallet from a private key
    let privateKey = process.env.PRIVATE_KEY;
    let wallet = new ethers.Wallet(privateKey, provider);

    // Create a factory for our contract
    let factory = new ethers.ContractFactory(contractAbi, contractBytecode, wallet);

    // Deploy the contract
    let contract = await factory.deploy();

    console.log(`Contract deployed at address: ${await contract.getAddress()}`);
}

main().catch(console.error);